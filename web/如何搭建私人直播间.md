# 如何搭建私人直播间
相信很多人都想要进行直播，可是当下不少直播平台是实名制的，而国外直播平台大部分网络波动大，播放时可以卡成PPT，而且对观众的能力也有一定要求。今天我就教大家自己搭建私人直播间，延时仅为1~2秒。
# 教程
## 下载
要想有私人直播间，需要先搭建服务器，我们选择使用方便快捷的smart_rtmpd作为直播服务器。首先我们先点击下面链接下载我们需要的直播服务器。
### smart_rtmpd链接
> 项目地址：[smart_rtmpd项目地址Github](https://github.com/superconvert/smart_rtmpd)
> 
> 下载链接Github：[下载smart_rtmpd](https://github.com/superconvert/smart_rtmpd/releases/download/v.2.0.3/rtmpd.zip)
> 
> 加速下载：[加速下载smart_rtmpd](https://edgeone.gh-proxy.org/https://github.com/superconvert/smart_rtmpd/releases/download/v.2.0.3/rtmpd.zip)
> 
> Github加速器：[Github加速器](https://gh-proxy.com/)
### obs链接
> obs官网：[点击打开obs官网](https://obsproject.com/)
## 安装
先下载对应自己系统的obs并安装。

把下载下来的`rtmpd.zip`拖到你方便使用的目录，然后在那里解压它。

解压完成后打开rtmpd文件夹，可以看见里面有各个系统使用的smart_rtmpd版本，WIndows用户解压`smart_rtmpd_win.zip`，其他系统解压里面对应的压缩包。这边主要以Windows用户为主，其它系统操作逻辑都差不多，按这个和原项目说明进行参考。

解压`smart_rtmpd_win.zip`完成后打开smart_rtmpd_win文件夹，双击`smart_rtmpd.exe`打开服务器
## 搭建
现在我们成功安装并打开了服务器，这里我们使用whip和whep协议进行直播，因为使用whip和whep延时会很低，也就相差1~2秒

在服务器面板右侧，勾选`启用HTTP`，对应的HTTP端口默认8080，如果和其他软件（比如网页服务器）发生冲突，就修改端口，我建议改为`9090`，下面所有的端口我都以`9090`端口做演示。

### obs推流
打开obs，点设置，点左侧选项卡的直播，服务选WHIP，服务器一栏填写`http://127.0.0.1:9090/whip/v1?app=live&name=stream`，之后点确定按钮。

打开服务器面板，点`启动(start)`按钮就启动服务器了

回到obs，点击开始直播

访问`http://192.168.xxx.xxx:9090`，这里的`192.168.xxx.xxx`是你电脑对应的局域网IP，自己使用`ipconfig`或`ifconfig`查询自己电脑IP

如果成功进入`http://192.168.xxx.xxx:9090`，那么打开菜单，点`WHIP列表`，再点`whep:live/stream`，如果可以看见自己的直播，就说明成功了。
## 内网穿透
光在内网让自己看直播可不行，还要让别人看才行。

内网穿透这里不详细讲，但推荐搭建使用hppro或cloudflared，不推荐使用openfrp。

如果是使用cloudflared，可以看技术爬爬虾的视频：https://www.bilibili.com/video/BV1H4421X7Wg

**一定要注意，需要映射的内网ip一定要写`192.168.xxx.xxx`，也就是电脑在局域网里的IP，千万别填`127.0.0.1`，不然看不了直播。**
